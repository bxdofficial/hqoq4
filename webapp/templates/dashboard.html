{% extends 'base.html' %}
{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Ø­Ù‚ÙˆÙ‚ÙŠ{% endblock %}

{% block content %}
<!-- Dashboard Header -->
<section class="dashboard-head glass fade-in">
  <div class="user-info">
    <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {{ user.full_name }} ğŸ‘‹</h2>
    <p>
      <i data-lucide="mail" style="width:14px;height:14px;display:inline-block;vertical-align:middle;margin-left:4px"></i>
      {{ user.email }}
      <span style="margin: 0 12px;">â€¢</span>
      <span class="badge {% if user.user_type == 'lawyer' %}badge-gold{% elif user.user_type == 'admin' %}badge-error{% else %}badge{% endif %}">
        {% if user.user_type == 'client' %}Ø¹Ù…ÙŠÙ„{% elif user.user_type == 'lawyer' %}Ù…Ø­Ø§Ù…ÙŠ{% else %}Ù…Ø¯ÙŠØ±{% endif %}
      </span>
      {% if user.is_verified %}
      <span class="badge badge-verified" style="margin-right: 8px;">
        <i data-lucide="badge-check" style="width:12px;height:12px"></i>
        Ù…ÙˆØ«Ù‚
      </span>
      {% endif %}
    </p>
  </div>
  <div class="user-avatar">
    {{ user.full_name[0] }}
  </div>
</section>

<!-- Quick Stats -->
<section class="stats-grid stagger">
  <div class="glass stat-card">
    <div class="stat-icon">ğŸ“</div>
    <div class="stat-number">{{ cases|length }}</div>
    <div class="stat-label">Ù‚Ø¶Ø§ÙŠØ§ÙŠ</div>
  </div>
  <div class="glass stat-card">
    <div class="stat-icon">â³</div>
    <div class="stat-number">{{ cases|selectattr('status', 'equalto', 'pending')|list|length }}</div>
    <div class="stat-label">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
  </div>
  <div class="glass stat-card">
    <div class="stat-icon">ğŸ”„</div>
    <div class="stat-number">{{ cases|selectattr('status', 'equalto', 'in_progress')|list|length }}</div>
    <div class="stat-label">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</div>
  </div>
  <div class="glass stat-card">
    <div class="stat-icon">âœ…</div>
    <div class="stat-number">{{ cases|selectattr('status', 'equalto', 'completed')|list|length }}</div>
    <div class="stat-label">Ù…ÙƒØªÙ…Ù„Ø©</div>
  </div>
</section>

<!-- Quick Actions -->
<section class="glass" style="padding: 24px; margin-bottom: 24px;">
  <h3 style="margin-bottom: 16px;">
    <i data-lucide="zap" style="width:20px;height:20px;display:inline-block;vertical-align:middle;margin-left:8px;color:var(--gold)"></i>
    Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©
  </h3>
  <div style="display: flex; gap: 12px; flex-wrap: wrap;">
    {% if user.user_type == 'client' %}
    <a href="/cases/new" class="btn btn-gold">
      <i data-lucide="plus" style="width:18px;height:18px"></i>
      Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
    </a>
    <a href="/search" class="btn">
      <i data-lucide="search" style="width:18px;height:18px"></i>
      Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø§Ù…ÙŠ
    </a>
    {% endif %}
    <a href="/ai-assistant" class="btn">
      <i data-lucide="bot" style="width:18px;height:18px"></i>
      Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ
    </a>
    <a href="/profile" class="btn">
      <i data-lucide="user" style="width:18px;height:18px"></i>
      Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ
    </a>
    <a href="/payments" class="btn">
      <i data-lucide="credit-card" style="width:18px;height:18px"></i>
      Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª
    </a>
  </div>
</section>

<!-- Cases Table -->
<section class="table-wrap glass fade-in">
  <h3>
    <i data-lucide="folder" style="width:20px;height:20px;color:var(--gold)"></i>
    Ù‚Ø¶Ø§ÙŠØ§ÙŠ Ø§Ù„Ø£Ø®ÙŠØ±Ø©
    {% if user.user_type == 'client' %}
    <a href="/cases/new" class="btn btn-sm btn-gold" style="margin-right: auto;">
      <i data-lucide="plus" style="width:14px;height:14px"></i>
      Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
    </a>
    {% endif %}
  </h3>
  
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
        <th>Ø§Ù„Ù†ÙˆØ¹</th>
        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
      </tr>
    </thead>
    <tbody>
      {% for c in cases %}
      <tr>
        <td><span style="color: var(--text-muted);">#{{ c.id }}</span></td>
        <td>
          <strong>{{ c.title }}</strong>
        </td>
        <td>{{ c.case_type }}</td>
        <td>
          {% if c.status == 'pending' %}
            <span class="badge badge-warning">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>
          {% elif c.status == 'accepted' %}
            <span class="badge badge-gold">Ù…Ù‚Ø¨ÙˆÙ„Ø©</span>
          {% elif c.status == 'in_progress' %}
            <span class="badge">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</span>
          {% elif c.status == 'completed' %}
            <span class="badge badge-success">Ù…ÙƒØªÙ…Ù„Ø©</span>
          {% elif c.status == 'rejected' %}
            <span class="badge badge-error">Ù…Ø±ÙÙˆØ¶Ø©</span>
          {% elif c.status == 'cancelled' %}
            <span class="badge badge-error">Ù…Ù„ØºØ§Ø©</span>
          {% else %}
            <span class="badge">{{ c.status }}</span>
          {% endif %}
        </td>
        <td style="color: var(--text-muted); font-size: 13px;">{{ c.created_at[:10] if c.created_at else '-' }}</td>
        <td>
          <a href="/cases/{{ c.id }}" class="btn btn-sm">
            <i data-lucide="eye" style="width:14px;height:14px"></i>
            Ø¹Ø±Ø¶
          </a>
          {% if c.lawyer_user_id %}
          <a href="/cases/{{ c.id }}/messages" class="btn btn-sm">
            <i data-lucide="message-circle" style="width:14px;height:14px"></i>
            Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
          </a>
          {% endif %}
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="6" class="table-empty">
          <div class="empty-state">
            <div class="icon">ğŸ“</div>
            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø¶Ø§ÙŠØ§ Ø¨Ø¹Ø¯</h3>
            <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø¶ÙŠØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø£Ùˆ ØªØµÙØ­ Ø§Ù„Ù…Ø­Ø§Ù…ÙŠÙ†</p>
            {% if user.user_type == 'client' %}
            <a href="/cases/new" class="btn btn-gold">
              <i data-lucide="plus" style="width:18px;height:18px"></i>
              Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
